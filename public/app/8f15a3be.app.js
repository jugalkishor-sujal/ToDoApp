"use strict";angular.module("toDoAppApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ui.calendar","ngQuickDate"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("login"),c.html5Mode(!0)}]),angular.module("toDoAppApp").controller("CalenderCtrl",["$scope","$compile","uiCalendarConfig","Todos",function(a,b,c,d){a.uiConfig={calendar:{height:450,editable:!0,header:{left:"month basicWeek basicDay agendaWeek agendaDay",center:"title",right:"today prev,next"},dayClick:a.alertEventOnClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize}},a.eventSources=[],a.events=[];var e=new Date,f=e.getDate(),g=e.getMonth(),h=e.getFullYear();a.changeTo="Hungarian",a.GetAllTodo=function(){d.get().success(function(b){a.events=b;for(var c=1;c<=a.events.length;c++)a.events[c].id={},a.events[c].id=c;console.log(a.events),a.loading=!1}).error(function(b){a.loading=!1,a.error=b,a.events=[]})},a.GetAllTodo(),a.eventsF=function(a,b,c,d){var e=new Date(a).getTime()/1e3,f=(new Date(b).getTime()/1e3,new Date(a).getMonth()),g=[{title:"Feed Me "+f,start:e+5e4,end:e+1e5,allDay:!1,className:["customFeed"]}];d(g)},a.calEventsExt={color:"#f00",textColor:"yellow",events:[{type:"party",title:"Lunch",start:new Date(h,g,f,12,0),end:new Date(h,g,f,14,0),allDay:!1},{type:"party",title:"Lunch 2",start:new Date(h,g,f,12,0),end:new Date(h,g,f,14,0),allDay:!1},{type:"party",title:"Click for Google",start:new Date(h,g,28),end:new Date(h,g,29),url:"http://google.com/"}]},a.alertOnEventClick=function(b){a.alertMessage=b.title+" was clicked "},a.alertOnDrop=function(b,c){a.alertMessage="Event Droped to make dayDelta "+c},a.alertOnResize=function(b,c){a.alertMessage="Event Resized to make dayDelta "+c},a.addRemoveEventSource=function(a,b){var c=0;angular.forEach(a,function(d,e){a[e]===b&&(a.splice(e,1),c=1)}),0===c&&a.push(b)},a.addEvent=function(){a.events.push({title:"Open Sesame",start:new Date(h,g,28),end:new Date(h,g,29),className:["openSesame"]})},a.remove=function(b){a.events.splice(b,1)},a.changeView=function(a,b){c.calendars[b].fullCalendar("changeView",a)},a.renderCalender=function(a){c.calendars[a]&&c.calendars[a].fullCalendar("render")},a.eventRender=function(c,d){d.attr({tooltip:c.title,"tooltip-append-to-body":!0}),b(d)(a)},a.uiConfig={calendar:{height:450,editable:!0,header:{left:"title",center:"",right:"today prev,next"},eventClick:a.alertOnEventClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender}},a.changeLang=function(){"Hungarian"===a.changeTo?(a.uiConfig.calendar.dayNames=["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],a.uiConfig.calendar.dayNamesShort=["Vas","Hét","Kedd","Sze","Csüt","Pén","Szo"],a.changeTo="English"):(a.uiConfig.calendar.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a.uiConfig.calendar.dayNamesShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a.changeTo="Hungarian")},a.eventSources=[a.events,a.eventSource,a.eventsF],a.eventSources2=[a.calEventsExt,a.eventsF,a.events]}]),angular.module("toDoAppApp").config(["$stateProvider",function(a){a.state("calender",{url:"/calender",templateUrl:"app/calender/calender.html",controller:"CalenderCtrl"})}]).factory("Todos",["$http",function(a){return{get:function(){return a.get("/api/todos")},getById:function(b){return a.get("/api/todos/"+b)},create:function(b){return a.post("/api/todos",b)},update:function(b,c){return a.put("/api/todos/"+b,c)},"delete":function(b){return a.delete("/api/todos/"+b)}}}]),angular.module("toDoAppApp").controller("HomeCtrl",["$scope","$http","Todos",function(a,b,c){a.formData={},a.loading=!0,a.editing=a.editing||!1,a.delete=a.delete||!1,a.okButton=a.okButton||"Add",a.todos=a.todos||[],a.GetAllTodo=function(){c.get().success(function(b){a.todos=b,a.loading=!1}).error(function(b){a.loading=!1,a.error=b})},a.GetAllTodo(),a.createTodo=function(){a.loading=!0,a.error="",a.success="",void 0!==a.formData.todoTitle&&(a.editing?c.update(a.formData._id,a.formData).success(function(b){a.loading=!1,a.okButton="Add",a.editing=!1,a.delete=!1,a.formData={},a.success=b,a.GetAllTodo()}).error(function(b){a.loading=!1,a.error=b}):c.create(a.formData).success(function(b){a.loading=!1,a.formData={},a.success=b,a.GetAllTodo()}).error(function(b){a.loading=!1,a.error=b}))},a.deleteTodo=function(b){a.loading=!0,a.error="",a.success="",c.delete(b).success(function(b){a.loading=!1,a.okButton="Add",a.editing=!1,a.delete=!1,a.success=b,a.GetAllTodo()}).error(function(b){a.loading=!1,a.error=b})},a.editTodo=function(b){a.loading=!0,a.error="",a.editing=!0,a.delete=!0,a.okButton="Update",a.formData={},c.getById(b).success(function(b){a.formData=b,a.loading=!1}).error(function(b){a.loading=!1,a.error=b})},a.clearTodo=function(){a.loading=!1,a.error="",a.success="",a.formData={},a.editing=!1,a.delete=!1,a.okButton="Add"}}]),angular.module("toDoAppApp").config(["$stateProvider",function(a){a.state("home",{url:"/home",templateUrl:"app/home/home.html",controller:"HomeCtrl"})}]).factory("Todos",["$http",function(a){return{get:function(){return a.get("/api/todos")},getById:function(b){return a.get("/api/todos/"+b)},create:function(b){return a.post("/api/todos",b)},update:function(b,c){return a.put("/api/todos/"+b,c)},"delete":function(b){return a.delete("/api/todos/"+b)}}}]),angular.module("toDoAppApp").controller("LoginCtrl",["$scope","$location","Users",function(a,b,c){a.doLogin=function(){a.loading=!0;var d=a.username;if(d){var e=a.password;e&&c.login({username:d,password:e}).success(function(c){a.userLoginInfo=c,a.userLoginInfo.role?b.path("/home"):(a.error=c,a.loading=!1)}).error(function(b){a.loading=!1,a.error=b})}}}]),angular.module("toDoAppApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl"})}]).factory("Users",["$http",function(a){return{get:function(){return a.get("/api/users")},getById:function(b){return a.get("/api/users/"+b)},login:function(b){return a.post("/api/users/login",b)},update:function(b,c){return a.put("/api/users/"+b,c)},"delete":function(b){return a.delete("/api/users/"+b)}}}]),angular.module("toDoAppApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("toDoAppApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/home"},{title:"Calender",link:"/calender"},{title:"Logout",link:"/login"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("toDoAppApp").run(["$templateCache",function(a){a.put("app/calender/calender.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class=hero-unit id=banner></header><div class=container><div ui-calendar=uiConfig.calendar class="span8 calendar" ng-model=eventSources></div></div>'),a.put("app/home/home.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class=hero-unit id=banner></header><div class=container><!-- FORM TO CREATE TODOS --><div id=todo-form class=row><div ng-show=error class="alert alert-danger">{{error}}</div><div class="col-sm-8 col-sm-offset-2 text-center"><form name=form ng-submit=createTodo() role=form><div class=form-group><!-- BIND THIS VALUE TO formData.text IN ANGULAR --><input class="form-control input-md text-center" placeholder=Title ng-model=formData.todoTitle required> <input class="form-control input-md text-center" placeholder=Description ng-model=formData.todoDescription><!--<input type="text" class="form-control input-md text-center" placeholder="Event Start DateTime" ng-model="formData.sDate" required>\r\n                        <input type="text" class="form-control input-md text-center" placeholder="Event End DateTime" ng-model="formData.eDate" required>--><quick-datepicker ng-model=formData.sDate date-format=dd/MM/yyyy placeholder="Pick a Start Date" disable-timepicker=true required></quick-datepicker><quick-datepicker ng-model=formData.eDate date-format=dd/MM/yyyy placeholder="Pick a End Date" disable-timepicker=true required></quick-datepicker></div><!-- createToDo() WILL CREATE NEW TODOS --><button type=submit ng-disabled="form.$invalid || loading" class="btn btn-success">Save</button> <button type=submit ng-disabled="form.$invalid || loading" class="btn btn-primary" ng-click=clearTodo()>Clear</button></form></div></div><div class=row><div class=col-lg-12><!-- TODO LIST --><div id=todo-list class=row><table st-persist=myTable st-table=rowCollection class="table table-bordered"><thead><td st-sort=sNo>S.No.</td><td st-sort=title>Title</td><td st-sort=dateStart>Date-Start</td><td st-sort=dateEnd>Date-End</td><td>Remove</td><tr><th colspan=5><input st-search placeholder="global search..." class="input-sm form-control" type="search"></th></tr></thead><tbody><!-- LOOP OVER THE TODOS IN $scope.todos --><tr ng-repeat="todo in todos"><td>{{$index + 1}}</td><td>{{ todo.todoTitle }}</td><td>{{ todo.sDate |date:\'dd/MM/yyyy\'}}</td><td>{{ todo.eDate |date:\'dd/MM/yyyy\'}}</td><td><button type=button ng-click=deleteTodo(todo._id) class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove-circle"></i></button><button type=button ng-click=editTodo(todo._id) class="btn btn-sm btn-info"><i class="glyphicon glyphicon-edit"></i></button></td></tr></tbody><tfoot><tr><td colspan=5 class=text-center><div st-pagination></div></td></tr></tfoot></table><p class=text-center ng-show=loading><span class="fa fa-spinner fa-spin fa-3x"></span></p></div></div></div><footer class=footer><div class=container><p>ToDoApp v2.0.13 |</p></div></footer></div>'),a.put("app/login/login.html",'<header id=header></header><form name=form ng-submit=doLogin() role=form><h3 class=form-control-heading>Please sign in</h3><div ng-show=error class="alert alert-danger">{{error}}</div><div class=form-group><label for=username>Username</label><i class="fa fa-key"></i> <input name=username id=username class=form-control ng-model=username required> <span ng-show="form.username.$dirty && form.username.$error.required" class=help-block>Username is required</span></div><div class=form-group><label for=password>Password</label><i class="fa fa-lock"></i> <input type=password name=password id=password class=form-control ng-model=password required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span></div><div class=form-actions><button type=submit ng-disabled="form.$invalid || dataLoading" class="btn btn-danger">Login</button><p class=text-center ng-show=loading><span class="fa fa-spinner fa-spin fa-3x"></span></p></div></form>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=/home class=navbar-brand>to-do-app</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);